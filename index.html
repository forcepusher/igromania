<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <title>Igromania</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: black;
    }

    .window-viewport {
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      overflow: hidden;
    }

    .letterbox-viewport-constraint {
      width: 100%;
      height: 100%;
      max-width: calc(100vh * 16 / 9);
      max-height: calc(100vw * 9 / 16);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
    }

    .video-controls-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 5;
      display: flex;
      pointer-events: auto;
    }

    .control-zone {
      height: 100%;
      cursor: pointer;
      user-select: none;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .control-zone-left {
      flex: 1;
    }

    .control-zone-center {
      flex: 4;
    }

    .control-zone-right {
      flex: 1;
    }

    #video-player-frame {
      width: 100%;
      height: 800%;
      border: none;
      pointer-events: none;
      user-select: none;
    }

    .video-transition {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 10;
      background: black;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 20px;
      visibility: visible;
      opacity: 1;
      transition: opacity 0.5s ease-out;
    }

    .video-transition.fade-out {
      opacity: 0;
    }

    .video-transition svg {
      width: 50%;
      height: auto;
    }

    .loading-spinner {
      position: relative;
      width: 200px;
      height: 4px;
      background-color: rgba(255, 255, 255, 0.2);
      border-radius: 2px;
      overflow: hidden;
    }

    .loading-spinner::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background-color: white;
      border-radius: 2px;
      animation: loading-slide 2s infinite ease-in-out;
    }

    @keyframes loading-slide {
      0% {
        left: -100%;
      }

      100% {
        left: 100%;
      }
    }

    .seek-icon,
    .pause-icon {
      width: 80px;
      height: 80px;
      background: rgba(0, 0, 0, 0.7);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease;
      z-index: 15;
    }

    .seek-icon.show,
    .pause-icon.show {
      opacity: 1;
    }

    .seek-icon svg,
    .pause-icon svg {
      width: 40px;
      height: 40px;
      fill: white;
      display: block;
    }

    .pause-icon {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
  </style>
</head>

<body>
  <div class="window-viewport">
    <div class="letterbox-viewport-constraint">
      <iframe id="video-player-frame" allow="autoplay">
      </iframe>
      <div class="video-controls-overlay">
        <div id="control-zone-left" class="control-zone control-zone-left">
          <div id="seek-left-icon" class="seek-icon">
            <svg viewBox="0 0 24 24">
              <path d="M11,18V6L3,12L11,18Z" />
              <path d="M18,6V18L10,12L18,6Z" />
            </svg>
          </div>
        </div>
        <div id="control-zone-center" class="control-zone control-zone-center"></div>
        <div id="control-zone-right" class="control-zone control-zone-right">
          <div id="seek-right-icon" class="seek-icon">
            <svg viewBox="0 0 24 24">
              <path d="M13,6V18L21,12L13,6Z" />
              <path d="M6,18V6L14,12L6,18Z" />
            </svg>
          </div>
        </div>
      </div>

      <div id="pause-icon" class="pause-icon">
        <svg viewBox="0 0 24 24">
          <path d="M14,19H18V5H14M6,19H10V5H6V19Z" />
        </svg>
      </div>
      <div id="video-transition" class="video-transition">
        <svg width="86" height="28" viewBox="0 0 86 28" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M80.1137 12.4608C79.977 12.8039 79.8403 13.1127 79.7036 13.2843C79.396 13.4215 79.0542 13.4559 78.7466 13.3872C75.6022 12.3921 75.0212 10.4019 75.2604 8.34311C76.0123 9.02939 76.6959 9.71566 77.4478 10.3676V9.57841C77.2086 9.33821 77.0035 9.13233 76.7643 8.92645C76.6275 8.61762 76.6959 8.20586 76.901 7.96566C77.7212 9.50978 78.7808 11.0196 80.1137 12.4608ZM85.3088 5.28919C85.0354 5.32351 84.8303 5.35782 84.5227 5.39213C84.4885 5.97547 84.4543 6.59311 84.4202 7.17645C83.1897 7.3137 81.7543 5.8039 80.6264 4.25978C77.9263 1.20586 76.5934 1.3088 75.0212 4.67155C73.3464 4.87743 72.8679 6.0441 72.6629 7.17645H72.116C72.0477 7.89704 71.9793 8.65194 71.911 9.37253C72.116 9.40684 72.3895 9.47547 72.5945 9.50978C72.6629 10.848 73.7908 12.1176 75.944 13.3872V13.7304C73.3123 16.8872 70.6805 20.0441 68.083 23.201C68.1855 23.8872 68.2881 24.5392 68.4248 25.2255C69.4843 25.5686 70.2362 26.0833 70.8173 26.701C73.3123 24.8137 75.568 22.6519 77.6529 20.3186C77.6187 20.147 77.5162 19.8382 77.482 19.6666C76.6617 20.5588 75.9098 21.5539 75.0895 22.4461C74.987 22.3088 74.8845 22.1715 74.7819 22.0343C75.1579 21.6225 75.568 21.1764 75.944 20.7647C76.0465 20.4902 75.8414 20.0784 75.944 19.7696C76.9351 18.6372 77.7896 17.6421 79.0884 14.8284C79.2934 14.8627 79.601 14.897 79.8061 14.9314C79.9428 14.5539 80.0454 14.1764 80.1821 13.799C80.3871 13.799 80.558 13.7647 80.7631 13.7647C81.7201 15.9608 81.5834 21.1764 81.6175 25.2941C81.7543 25.2941 81.9251 25.3284 82.0619 25.3284C82.1986 24.0588 82.3011 22.8235 82.4378 21.5539H82.9505C82.9163 22.9264 82.848 24.299 82.8138 25.7059C83.4632 25.6715 84.0784 25.6372 84.7278 25.6029C86.0949 16.9215 86.4708 10.4706 85.3088 5.28919Z"
            fill="#F2193D" />
          <path
            d="M69.279 16.2304C70.2701 13.1079 70.6119 9.47062 69.9967 5.1814C68.4245 4.4265 67.57 2.95101 67.8093 0.617676C65.5877 1.71572 66.1687 5.00983 65.451 10.4657C64.0497 18.701 61.5205 24.2598 57.3508 23.8138C56.9407 18.9755 57.1116 14.4118 57.385 9.95101C57.5559 9.9167 57.7268 9.9167 57.8977 9.88238C57.7951 8.40689 57.6926 6.96572 57.5901 5.49022C57.2141 5.45591 56.7356 5.38728 56.3596 5.31866C55.8128 6.4167 55.1634 7.44611 54.0355 8.23532C54.0013 6.89709 54.1722 5.86768 54.514 4.80395C54.6166 4.28924 54.89 4.01473 55.3001 3.80885C55.6419 3.53434 55.7444 3.15689 55.7444 2.84807C55.3685 2.81375 55.0267 2.74513 54.6507 2.71081C51.7456 12.353 52.8051 18.2549 54.4798 23.6422C54.6507 24.0883 54.8558 24.4314 55.0267 24.6373C56.1887 25.7353 57.5559 26.799 58.8546 27.8285C61.1446 27.6569 62.5117 26.5589 63.2294 24.8089C63.0585 24.8089 62.8535 24.7745 62.6826 24.7745V25.5294C62.2724 25.5638 61.794 25.6324 61.3838 25.6667C62.6142 23.6765 63.332 21.5834 64.289 19.7304C64.5966 19.1471 65.3143 18.6667 65.6561 18.4608C65.6561 19.25 65.6219 20.0392 65.6219 20.8285C65.3143 21.0343 65.0751 21.2745 64.7675 21.4804C64.7333 22.201 64.5966 22.9902 64.5624 23.7451H65.0067C65.1092 23.3677 65.2459 22.9216 65.3485 22.5098C65.6219 22.4069 65.8953 22.3383 66.2029 22.2353C66.2371 22.75 66.2713 23.2647 66.3396 23.7794C66.7156 23.8481 67.1257 23.9167 67.5359 23.9853C67.2966 22.4069 67.2966 20.8628 67.6726 19.3873C67.8777 19.25 68.0485 19.1471 68.1853 19.1128C68.2194 19.3873 68.2878 19.6618 68.322 19.902H68.8005C68.8005 18.804 68.8346 17.7059 68.8346 16.6079C68.9372 16.5049 69.1081 16.3677 69.279 16.2304Z"
            fill="#F2193D" />
          <path
            d="M51.5413 17.8707C52.1702 14.7367 52.6241 11.3655 52.3472 7.25208C51.8646 7.02027 51.0744 6.79383 50.8994 6.55665C50.6476 5.84035 50.3952 5.08974 50.144 4.40774C49.8383 4.51604 49.4977 4.59062 49.192 4.69891C48.313 7.21954 48.3657 10.2387 48.488 13.3253C48.4238 15.5228 47.4387 15.8832 46.16 15.0818C45.6432 14.8506 45.0203 14.4154 44.3644 14.0493C43.7296 10.9717 44.8915 8.99521 44.8484 6.525C44.6338 5.97964 44.3214 5.71054 43.6032 5.68876C43.1583 5.6622 42.7147 5.70427 42.3046 5.71142C41.9971 5.71679 41.7974 6.02915 41.7686 6.33852C41.53 8.33319 41.5323 10.4266 41.157 12.4237C40.7655 13.4944 39.9963 14.4687 39.3296 15.4413C39.6024 15.4022 39.8752 15.3631 40.1138 15.3247C40.4537 15.2158 40.5616 15.5228 40.6018 15.8652C40.6066 16.1397 40.6455 16.4136 40.6497 16.6537C40.4788 16.6567 40.3769 16.6928 40.2061 16.6958C40.2025 16.4899 40.1647 16.2847 40.1269 16.0794L39.7169 16.0866C39.8391 17.217 39.8523 17.9718 39.7648 18.8313C39.5489 20.1735 39.3001 21.5849 39.1903 23.1312C38.9541 23.3069 38.7185 23.5169 38.4823 23.6926C38.4739 23.2123 38.5003 22.7657 38.4577 22.286L38.0477 22.2931C38.1292 23.0467 38.2449 23.7997 38.3606 24.5527C38.875 24.6467 39.3894 24.7407 39.9043 24.869C40.8875 28.318 43.5584 28.5803 43.3762 24.019C43.3001 21.618 43.5394 19.6577 45.998 19.5118C45.8853 18.9304 45.7714 18.2803 45.6245 17.6994C46.4471 17.8223 47.3764 18.1836 48.519 19.0217C48.7271 19.1896 48.835 19.4966 48.9111 19.9414C49.1413 21.3788 49.3373 22.8168 49.6017 24.2536C50.0141 24.3836 50.4602 24.4788 50.8726 24.6089C50.8703 22.5155 50.9021 20.4215 50.9004 18.3624C51.1719 18.2547 51.4765 18.0777 51.5413 17.8707Z"
            fill="#F2193D" />
          <path
            d="M33.3308 13.4001C32.9531 13.4965 32.5748 13.6271 32.1971 13.7235C32.3506 12.7652 32.4525 10.8452 32.6245 10.7795C33.3799 10.5868 33.9148 13.2387 33.3308 13.4001ZM38.1294 14.6164C38.232 14.6182 38.3351 14.5857 38.4718 14.588C37.4237 10.0053 38.0651 4.59412 36.059 0.0633246L32.7784 0.00606152C31.5123 5.95546 29.1623 11.3368 28.0689 17.1863C27.8614 17.3199 27.6546 17.4193 27.4472 17.5529C27.4363 16.2143 27.4945 14.8426 27.4495 13.5034C27.1365 13.8068 26.7211 14.1084 26.4081 14.4118C25.8165 18.9316 26.0144 23.2592 26.349 27.5892C27.6182 27.3368 28.9881 27.1892 30.4911 27.2497C30.8909 21.9716 30.2949 14.9944 34.1522 15.302C34.5905 17.609 34.9269 19.8799 35.3652 22.1869C35.9179 21.8534 36.4359 21.5536 36.9887 21.22C36.9041 20.189 36.8879 19.1591 36.8034 18.1281C36.9724 18.234 37.1421 18.3056 37.3112 18.4115C37.4065 18.825 37.4677 19.2379 37.563 19.6514C37.7015 19.5508 37.84 19.4503 37.979 19.3155C38.0408 17.7379 38.1025 16.1603 38.1294 14.6164Z"
            fill="#F2193D" />
          <path
            d="M26.6935 10.2206C26.7277 9.9804 26.8302 9.74021 26.7277 9.36276C26.2492 7.50982 25.7707 5.65688 25.2922 3.80393C21.4985 3.11766 21.3617 7.33825 18.525 10.152C18.2174 7.50982 17.4313 5.82844 16.1325 5.41668C16.2008 4.86766 16.1325 4.35295 15.9274 3.80393C15.7907 3.80393 15.6198 3.80393 15.4831 3.83825C15.4831 3.39217 15.5173 2.91178 15.5173 2.4657H14.697C14.697 2.70589 14.697 2.9804 14.7312 3.2206C14.8679 3.2206 14.9363 3.2206 15.0388 3.25491C14.9363 8.09315 13.6033 9.50001 11.4159 8.64217C9.80954 12.8628 9.74118 17.8382 9.16016 22.4706C9.53612 22.5049 9.91208 22.5735 10.288 22.6079C10.288 24.2549 11.5526 25.6275 12.4071 27C14.5261 25.7647 14.0134 17.9755 15.3122 13.9265C15.5173 13.9265 15.7224 13.9608 15.9274 13.9608C16.0983 15.951 16.2692 17.9412 16.4401 19.9314C17.4313 20.2402 18.4224 20.5147 19.4478 20.8235C20.644 14.5441 21.8744 10.2549 24.677 10.049C24.7454 12.5539 24.8137 15.0932 24.8821 17.5981C24.8821 18.25 25.5315 18.0441 25.5998 17.5981C25.7707 15.0588 25.9758 12.5882 26.6935 10.2206Z"
            fill="#F2193D" />
          <path
            d="M3.31528 22.424C3.11021 22.6985 3.07603 23.0417 3.11021 23.4534C3.14439 23.8652 3.24692 24.2083 3.52035 24.4485C3.5887 24.4142 3.62288 24.3113 3.65706 24.1054C3.69124 24.3799 3.72541 24.826 4.06719 24.826C4.3748 24.7917 4.23809 24.2427 4.40898 24.1397C4.44315 24.2427 4.54569 24.5858 4.64822 24.5515C5.16089 23.8309 5.12672 22.4583 4.64822 22.3211C4.54569 22.424 4.47733 22.9044 4.44315 23.2819C4.40898 22.7329 4.34062 22.424 4.34062 22.1152C4.30644 21.9436 4.03302 21.875 3.72541 22.0809C3.55452 22.2868 3.62288 23.0074 3.52035 23.4191C3.48617 23.1103 3.45199 22.8015 3.38363 22.4583C3.38363 22.3897 3.34945 22.3897 3.31528 22.424ZM3.55452 15.9387C3.55452 16.2132 3.55452 16.5564 3.5887 16.8309C3.69124 16.9338 4.03302 16.9338 4.27226 16.8652C4.54569 16.7623 4.6824 16.6593 4.71658 16.3505C4.71658 16.0417 4.44315 15.9044 4.13555 15.8358C3.99884 15.8015 3.86213 15.8015 3.69124 15.8358C3.62288 15.8358 3.5887 15.8701 3.55452 15.9387ZM5.63939 3.82599C5.63939 4.1005 5.63939 4.40932 5.67357 4.68383C5.50268 4.30638 5.22925 4.47795 5.19507 4.68383C5.19507 5.47304 5.16089 6.29657 5.16089 7.08579C5.12672 7.3603 5.05836 7.53187 4.99 7.70344C4.99 6.91422 5.02418 6.09069 4.95583 5.3701C4.88747 5.33579 4.78494 5.3701 4.71658 5.3701C3.96466 6.15932 3.21274 6.98285 2.46082 7.77206C2.39247 7.84069 2.28993 7.77206 2.28993 7.66912C2.28993 6.33089 2.28993 5.02697 2.32411 3.68873C2.59754 3.68873 2.83678 3.68873 3.11021 3.65442C3.14439 4.06618 3.14439 4.44363 3.17856 4.8554C3.21274 5.33579 3.45199 5.47304 3.62288 5.30148C3.96466 4.78677 4.30644 4.30638 4.64822 3.79167C4.88747 3.79167 5.16089 3.79167 5.40014 3.79167C5.50268 3.79167 5.53685 3.72304 5.63939 3.72304C5.63939 3.72304 5.63939 3.79167 5.63939 3.82599ZM3.00767 10.2083C3.00767 10.7917 3.00767 11.4093 3.04185 11.9927C3.00767 12.0613 2.9735 12.1299 2.93932 12.1985C2.93932 11.3407 2.93932 10.5172 2.93932 9.65932C2.93932 9.55638 3.00767 9.48775 3.11021 9.48775C3.2811 9.48775 3.45199 9.48775 3.62288 9.48775C3.65706 9.48775 3.72541 9.55638 3.75959 9.55638C4.23809 9.55638 4.6824 9.55638 5.16089 9.55638C5.19507 9.89951 5.19507 10.277 5.22925 10.6544C5.12672 10.4142 4.99 10.2083 4.88747 10.2083H4.03302C3.96466 10.2083 3.8963 10.277 3.8963 10.3456C3.93048 11.4093 3.96466 12.5074 3.96466 13.5711C3.99884 13.6054 4.03302 13.674 4.06719 13.7083C4.13555 13.7083 4.23809 13.7083 4.30644 13.7083C4.34062 13.7427 4.34062 13.7427 4.3748 13.777C3.93048 13.777 3.45199 13.777 3.00767 13.777C2.9735 13.7427 2.93932 13.7083 2.90514 13.7083C3.17856 13.6054 3.41781 13.4338 3.5887 13.1593C3.55452 12.2672 3.52035 11.375 3.52035 10.5172C3.41781 10.4142 3.17856 10.2427 3.00767 10.2083ZM2.66589 15.6642C2.66589 15.5956 2.66589 15.527 2.70007 15.4927C3.45199 15.4927 4.54569 15.4583 4.99 15.5956C5.43432 15.8015 5.50268 16.2476 5.43432 16.6936C5.33179 17.5172 4.61405 17.7917 3.69124 17.826C3.65706 17.826 3.62288 17.8603 3.62288 17.9289C3.5887 18.375 3.55452 18.8554 3.55452 19.3015C3.52035 19.5417 3.11021 19.473 3.11021 19.2328C3.11021 18.1005 3.14439 17.0711 3.14439 15.9387C3.04185 15.8358 2.83678 15.7672 2.66589 15.6642ZM2.66589 23.2819C2.66589 22.1152 3.2811 21.1887 4.06719 21.1887C4.85329 21.1887 5.4685 22.1152 5.4685 23.2819C5.4685 24.4485 4.85329 25.375 4.06719 25.375C3.31528 25.375 2.66589 24.4142 2.66589 23.2819ZM8.06603 24.8603V3.13971C8.06603 2.28187 7.34829 1.56128 6.45966 1.56128H1.60637C0.71774 1.56128 0 2.28187 0 3.13971V24.8603C0 25.7181 0.71774 26.4387 1.60637 26.4387H6.45966C7.34829 26.4387 8.06603 25.7525 8.06603 24.8603Z"
            fill="#F2193D" />
        </svg>
        <div id="loading-spinner" class="loading-spinner"></div>
      </div>
    </div>
  </div>
  </div>

  <script type="module">
    const videoPlayerFrame = document.getElementById('video-player-frame');
    const videoTransitionImage = document.getElementById('video-transition');
    const loadingSpinner = document.getElementById('loading-spinner');
    const seekLeftIcon = document.getElementById('seek-left-icon');
    const seekRightIcon = document.getElementById('seek-right-icon');
    const pauseIcon = document.getElementById('pause-icon');

    var transitionTimer;
    var seekLeftIconTimer;
    var seekRightIconTimer;
    var pauseIconTimer;

    function setTransitionState(newState) {
      if (newState) {
        if (transitionTimer) {
          clearTimeout(transitionTimer);
          transitionTimer = null;
        }
        videoTransitionImage.style.display = 'flex';
        videoTransitionImage.style.pointerEvents = 'auto';
        videoTransitionImage.classList.remove('fade-out');
        loadingSpinner.style.visibility = 'visible';
      }
      else {
        videoTransitionImage.classList.add('fade-out');
        videoTransitionImage.style.pointerEvents = 'none';
        transitionTimer = setTimeout(() => {
          videoTransitionImage.style.display = 'none';
          transitionTimer = null;
        }, 500);
        loadingSpinner.style.visibility = 'hidden';
      }
    }

    function showSeekLeftIcon() {
      if (seekLeftIconTimer) {
        clearTimeout(seekLeftIconTimer);
        seekLeftIconTimer = null;
      }

      seekLeftIcon.classList.add('show');
      seekLeftIconTimer = setTimeout(() => {
        seekLeftIcon.classList.remove('show');
        seekLeftIconTimer = null;
      }, 500);
    }

    function showSeekRightIcon() {
      if (seekRightIconTimer) {
        clearTimeout(seekRightIconTimer);
        seekRightIconTimer = null;
      }

      seekRightIcon.classList.add('show');
      seekRightIconTimer = setTimeout(() => {
        seekRightIcon.classList.remove('show');
        seekRightIconTimer = null;
      }, 500);
    }

    function updatePauseIcon() {
      if (pauseIconTimer) {
        clearTimeout(pauseIconTimer);
        pauseIconTimer = null;
      }

      if (!isPlaying && hasStartedPlaying) {
        pauseIcon.classList.add('show');
      } else {
        pauseIcon.classList.remove('show');
      }
    }

    async function fetchConfig() {
      try {
        const response = await fetch('config.json', { cache: 'no-store' });
        const config = await response.json();
        console.log('Fetched config:', config);
        return config;
      } catch (error) {
        console.error('Error fetching config:', error);
        // TODO: Gracefully terminate the app and display an error
        return {};
      }
    }

    const config = await fetchConfig();

    var currentVideoIndex = 0;
    var isPlaying = false;
    var hasStartedPlaying = false;
    const qualitySetting = { quality: '1080' };

    const hideControlsCommand = { type: 'player:hideControls', data: {} };
    const playCommand = { type: 'player:play', data: {} };
    const pauseCommand = { type: 'player:pause', data: {} };
    const setQualityCommand = { type: 'player:changeQuality', data: qualitySetting };
    function createChangeVideoCommand(videoId) {
      return { type: 'player:changeVideo', data: { id: videoId, params: qualitySetting } };
    };
    const seekForwardCommand = { type: 'player:relativelySeek', data: { time: 10 } };
    const seekBackCommand = { type: 'player:relativelySeek', data: { time: -10 } };

    function sendCommandToVideoPlayer(command) {
      console.log("Send Command:", command);
      videoPlayerFrame.contentWindow.postMessage(JSON.stringify(command), '*');
    };

    window.addEventListener('message', function (event) {
      var message = JSON.parse(event.data);
      console.log(message.type);

      switch (message.type) {
        case 'player:init':
          sendCommandToVideoPlayer(hideControlsCommand);
          break;
        case 'player:qualityList':
          sendCommandToVideoPlayer(setQualityCommand);
          sendCommandToVideoPlayer(playCommand);
          break;
        case 'player:playComplete':
          setTransitionState(true);
          currentVideoIndex = (currentVideoIndex + 1) % config.playlist.length;
          sendCommandToVideoPlayer(createChangeVideoCommand(config.playlist[currentVideoIndex]));
          break;
        case 'player:changeState':
          console.log(message.data.state);
          switch (message.data.state) {
            case 'playing':
              setTransitionState(false);
              isPlaying = true;
              hasStartedPlaying = true;
              updatePauseIcon();
              break;
            case 'pause':
              isPlaying = false;
              updatePauseIcon();
              break;
          }
          break;
      };
    });

    videoPlayerFrame.src = 'https://rutube.ru/play/embed/' + config.playlist[currentVideoIndex];

    function togglePlayPause() {
      if (isPlaying) {
        sendCommandToVideoPlayer(pauseCommand);
      } else {
        sendCommandToVideoPlayer(playCommand);
      }
    }

    function seekBackward() {
      sendCommandToVideoPlayer(seekBackCommand);
      showSeekLeftIcon();
    }

    function seekForward() {
      sendCommandToVideoPlayer(seekForwardCommand);
      showSeekRightIcon();
    }

    document.getElementById('control-zone-left').addEventListener('click', seekBackward);
    document.getElementById('control-zone-center').addEventListener('click', togglePlayPause);
    document.getElementById('control-zone-right').addEventListener('click', seekForward);

    document.getElementById('control-zone-left').addEventListener('touchend', (e) => {
      e.preventDefault();
      seekBackward();
    });

    document.getElementById('control-zone-center').addEventListener('touchend', (e) => {
      e.preventDefault();
      togglePlayPause();
    });

    document.getElementById('control-zone-right').addEventListener('touchend', (e) => {
      e.preventDefault();
      seekForward();
    });

    document.addEventListener('keydown', function (event) {
      if (event.key === 'ArrowLeft') {
        event.preventDefault();
        seekBackward();
      } else if (event.key === 'ArrowRight') {
        event.preventDefault();
        seekForward();
      } else if (event.key === 'Enter' || event.key === ' ') {
        event.preventDefault();
        togglePlayPause();
      }
    });
  </script>
</body>

</html>